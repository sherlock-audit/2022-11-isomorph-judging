HollaDieWaldfee

medium

# Vault_Velo: Borrower can earn rewards from gauge after being liquidated

## Summary
The `Vault_Velo` contract uses Deposit Receipts as collateral. When a loan is liquidated, Deposit Receipts are transferred to the liquidator. However the borrower is still the one that can call claim the rewards from the gauge.

## Vulnerability Detail
The `Depositor.claimRewards` function can only be called by the owner of the `Depositor`.
So when a deposit receipt is transferred to the liquidator after liquidation, any rewards that are generated while the deposit receipt is owned by the liquidator can only be claimed by the owner of the `Depositor` which is the borrower.
It might not always be the case that the liquidator can instantly withdraw the funds from the `Depositor`.

## Impact
While the deposit receipt is owned by the liquidator, the liquidator misses out on the rewards that are generated by the tokens (which are now his tokens) in the gauge.

## Code Snippet
[https://github.com/sherlock-audit/2022-11-isomorph/blob/main/contracts/Velo-Deposit-Tokens/contracts/Depositor.sol#L136-L147](https://github.com/sherlock-audit/2022-11-isomorph/blob/main/contracts/Velo-Deposit-Tokens/contracts/Depositor.sol#L136-L147)

## Tool used
Manual Review

## Recommendation
Explore mechanisms how the rewards that are generated after liquidation can be transferred to the liquidator.
Given the current architecture of the application there is no easy way to do this that requires only minor changes.

Or the Deposit Receipts could be burnt at the time of Liquidation by the `Vault_Velo` contract. This would however require that the `Vault_Velo` contract knows the `Depositor` contract it needs to withdraw from.